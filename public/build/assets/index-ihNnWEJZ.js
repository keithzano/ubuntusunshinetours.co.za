import{c as pe,r as ue,j as t,a as te,H as je,L as ge}from"./app-DUahgDyP.js";import{B as le}from"./badge-Dl8Pe_tC.js";import{B as J}from"./button-Qqwb2A9t.js";import{C as ae,a as re}from"./card-CQ-MANnW.js";import{D as ye,a as Ne,b as be,c as ne}from"./dropdown-menu-BzZAuXWH.js";import{I as ee}from"./input-Zxkpnc1z.js";import{S as ie,a as de,b as ce,c as i,d as oe}from"./select-DCUn_2zZ.js";import{A as _e}from"./admin-layout-BvCCx151.js";import{D as me}from"./download-CvXYekJn.js";import{S as Se}from"./search-Z92AN2O5.js";import{E as ve}from"./ellipsis-D_rhgFLC.js";import{E as we}from"./eye-BR8mEEcv.js";/* empty css            */import"./index-wLMGmOca.js";import"./index-B8hLAxQV.js";import"./Combination-DwC5R9eM.js";import"./index-BzJTgxyC.js";import"./index-C69J7Um_.js";import"./index-DI1vi2oc.js";import"./chevron-down-DG1WkzN5.js";import"./createLucideIcon-CG0ikhLP.js";import"./check-BW_4V7AE.js";import"./file-text-D4GNBDA6.js";import"./calendar-DphA97fo.js";import"./users-CkdR5TKL.js";import"./map-pin-CjzSY848.js";import"./message-square-6Q6Jgz8t.js";import"./log-out-BhzuXW0W.js";function tt(d){const e=pe.c(80),{bookings:l,filters:r}=d,[c,xe]=ue.useState(r.search||"");let A;e[0]!==r||e[1]!==c?(A=s=>{s.preventDefault(),te.get("/admin/bookings",{...r,search:c},{preserveState:!0})},e[0]=r,e[1]=c,e[2]=A):A=e[2];const K=A;let L;e[3]!==r?(L=(s,a)=>{const se={...r,[s]:a};a||delete se[s],te.get("/admin/bookings",se,{preserveState:!0})},e[3]=r,e[4]=L):L=e[4];const n=L;let B;e[5]!==r?(B=()=>{const s=new URLSearchParams(r);window.location.href=`/admin/bookings/export?${s.toString()}`},e[5]=r,e[6]=B):B=e[6];const O=B;let I;e[7]===Symbol.for("react.memo_cache_sentinel")?(I={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",confirmed:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",completed:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"},e[7]=I):I=e[7];const he=I;let P;e[8]===Symbol.for("react.memo_cache_sentinel")?(P={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",paid:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",failed:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",refunded:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"},e[8]=P):P=e[8];const fe=P;let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(je,{title:"Bookings - Admin"}),e[9]=M):M=e[9];let R;e[10]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Bookings"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage tour bookings"})]}),e[10]=R):R=e[10];let T;e[11]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(me,{className:"mr-2 h-4 w-4"}),e[11]=T):T=e[11];let o;e[12]!==O?(o=t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[R,t.jsxs(J,{onClick:O,children:[T,"Export"]})]}),e[12]=O,e[13]=o):o=e[13];let F;e[14]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx(Se,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[14]=F):F=e[14];let V;e[15]===Symbol.for("react.memo_cache_sentinel")?(V=s=>xe(s.target.value),e[15]=V):V=e[15];let m;e[16]!==c?(m=t.jsxs("div",{className:"relative flex-1",children:[F,t.jsx(ee,{placeholder:"Search bookings...",className:"pl-9",value:c,onChange:V})]}),e[16]=c,e[17]=m):m=e[17];let $;e[18]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(J,{type:"submit",children:"Search"}),e[18]=$):$=e[18];let x;e[19]!==K||e[20]!==m?(x=t.jsxs("form",{onSubmit:K,className:"flex flex-1 gap-2",children:[m,$]}),e[19]=K,e[20]=m,e[21]=x):x=e[21];const Q=r.status||"all";let h;e[22]!==n?(h=s=>n("status",s==="all"?null:s),e[22]=n,e[23]=h):h=e[23];let H;e[24]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(ie,{className:"w-36",children:t.jsx(de,{placeholder:"Status"})}),e[24]=H):H=e[24];let z;e[25]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsxs(ce,{children:[t.jsx(i,{value:"all",children:"All Status"}),t.jsx(i,{value:"pending",children:"Pending"}),t.jsx(i,{value:"confirmed",children:"Confirmed"}),t.jsx(i,{value:"cancelled",children:"Cancelled"}),t.jsx(i,{value:"completed",children:"Completed"})]}),e[25]=z):z=e[25];let f;e[26]!==Q||e[27]!==h?(f=t.jsxs(oe,{value:Q,onValueChange:h,children:[H,z]}),e[26]=Q,e[27]=h,e[28]=f):f=e[28];const W=r.payment_status||"all";let p;e[29]!==n?(p=s=>n("payment_status",s==="all"?null:s),e[29]=n,e[30]=p):p=e[30];let U;e[31]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx(ie,{className:"w-36",children:t.jsx(de,{placeholder:"Payment"})}),e[31]=U):U=e[31];let Z;e[32]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsxs(ce,{children:[t.jsx(i,{value:"all",children:"All Payment"}),t.jsx(i,{value:"pending",children:"Pending"}),t.jsx(i,{value:"paid",children:"Paid"}),t.jsx(i,{value:"failed",children:"Failed"}),t.jsx(i,{value:"refunded",children:"Refunded"})]}),e[32]=Z):Z=e[32];let u;e[33]!==W||e[34]!==p?(u=t.jsxs(oe,{value:W,onValueChange:p,children:[U,Z]}),e[33]=W,e[34]=p,e[35]=u):u=e[35];let j;e[36]!==f||e[37]!==u?(j=t.jsxs("div",{className:"flex gap-2",children:[f,u]}),e[36]=f,e[37]=u,e[38]=j):j=e[38];let g;e[39]!==x||e[40]!==j?(g=t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[x,j]}),e[39]=x,e[40]=j,e[41]=g):g=e[41];const X=r.date_from||"";let y;e[42]!==n?(y=s=>n("date_from",s.target.value),e[42]=n,e[43]=y):y=e[43];let N;e[44]!==X||e[45]!==y?(N=t.jsx(ee,{type:"date",value:X,onChange:y,placeholder:"From date",className:"w-48"}),e[44]=X,e[45]=y,e[46]=N):N=e[46];const Y=r.date_to||"";let b;e[47]!==n?(b=s=>n("date_to",s.target.value),e[47]=n,e[48]=b):b=e[48];let _;e[49]!==Y||e[50]!==b?(_=t.jsx(ee,{type:"date",value:Y,onChange:b,placeholder:"To date",className:"w-48"}),e[49]=Y,e[50]=b,e[51]=_):_=e[51];let S;e[52]!==N||e[53]!==_?(S=t.jsxs("div",{className:"mt-4 flex gap-2",children:[N,_]}),e[52]=N,e[53]=_,e[54]=S):S=e[54];let v;e[55]!==g||e[56]!==S?(v=t.jsx(ae,{className:"mb-6",children:t.jsxs(re,{className:"p-4",children:[g,S]})}),e[55]=g,e[56]=S,e[57]=v):v=e[57];let q;e[58]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("thead",{className:"border-b bg-muted",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Reference"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Customer"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Tour"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Date"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Participants"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Total"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e[58]=q):q=e[58];let w;if(e[59]!==l.data){let s;e[61]===Symbol.for("react.memo_cache_sentinel")?(s=a=>t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:a.booking_reference}),t.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(a.created_at).toLocaleDateString()})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:a.customer_name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a.customer_email})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:a.tour?.title}),t.jsx("p",{className:"text-sm text-muted-foreground",children:a.tour?.location?.name})]})}),t.jsx("td",{className:"px-4 py-3",children:new Date(a.tour_date).toLocaleDateString("en-ZA",{weekday:"short",year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{className:"px-4 py-3",children:a.total_participants}),t.jsxs("td",{className:"px-4 py-3 font-medium",children:["R ",a.total.toLocaleString()]}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"space-y-1",children:[t.jsx(le,{className:he[a.status]||"",children:a.status}),t.jsx(le,{className:fe[a.payment_status]||"",children:a.payment_status})]})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs(ye,{children:[t.jsx(Ne,{asChild:!0,children:t.jsx(J,{variant:"ghost",size:"icon",children:t.jsx(ve,{className:"h-4 w-4"})})}),t.jsxs(be,{align:"end",children:[t.jsx(ne,{asChild:!0,children:t.jsxs(ge,{href:`/admin/bookings/${a.id}`,children:[t.jsx(we,{className:"mr-2 h-4 w-4"}),"View Details"]})}),a.payment_status==="paid"&&t.jsxs(ne,{onClick:()=>window.open(`/admin/bookings/${a.id}/invoice`),children:[t.jsx(me,{className:"mr-2 h-4 w-4"}),"Download Invoice"]})]})]})})]},a.id),e[61]=s):s=e[61],w=l.data.map(s),e[59]=l.data,e[60]=w}else w=e[60];let C;e[62]!==l.data.length?(C=l.data.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"px-4 py-12 text-center text-muted-foreground",children:"No bookings found"})}),e[62]=l.data.length,e[63]=C):C=e[63];let k;e[64]!==w||e[65]!==C?(k=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[q,t.jsxs("tbody",{className:"divide-y divide-border",children:[w,C]})]})}),e[64]=w,e[65]=C,e[66]=k):k=e[66];let D;e[67]!==l.from||e[68]!==l.last_page||e[69]!==l.links||e[70]!==l.to||e[71]!==l.total?(D=l.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between border-t border-border px-4 py-3",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",l.from," to ",l.to," of ",l.total," bookings"]}),t.jsx("div",{className:"flex gap-2",children:l.links.map(Ce)})]}),e[67]=l.from,e[68]=l.last_page,e[69]=l.links,e[70]=l.to,e[71]=l.total,e[72]=D):D=e[72];let E;e[73]!==k||e[74]!==D?(E=t.jsx(ae,{children:t.jsxs(re,{className:"p-0",children:[k,D]})}),e[73]=k,e[74]=D,e[75]=E):E=e[75];let G;return e[76]!==v||e[77]!==E||e[78]!==o?(G=t.jsxs(_e,{children:[M,o,v,E]}),e[76]=v,e[77]=E,e[78]=o,e[79]=G):G=e[79],G}function Ce(d,e){return t.jsx(J,{variant:d.active?"default":"outline",size:"sm",disabled:!d.url,onClick:()=>d.url&&te.get(d.url),dangerouslySetInnerHTML:{__html:d.label}},e)}export{tt as default};
