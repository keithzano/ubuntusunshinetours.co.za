import{c as ne,r as ce,j as t,a as w,H as oe,L as Z}from"./app-C1SY9MDb.js";import{B as J}from"./badge-DZzXRnRE.js";import{B as S}from"./button-Cay5-c5j.js";import{C as K,a as O}from"./card-CR1uK1J-.js";import{D as me,a as de,b as xe,c as H}from"./dropdown-menu-pbi0L3hx.js";import{I as he}from"./input-JYc9kwZj.js";import{S as Q,a as W,b as X,c as n,d as Y}from"./select-CAhNXgoC.js";import{A as pe}from"./admin-layout-DjgJLR45.js";import{P as fe}from"./plus-Bl13SyrR.js";import{S as ue}from"./search-DE-sQS7q.js";import{C as je}from"./copy-BRDAdQJE.js";import{E as ge}from"./ellipsis-DrGQukjC.js";import{E as ye}from"./eye-BB0t7OmU.js";import{S as Ne}from"./square-pen-BdfAhEVt.js";import{T as be}from"./trash-2-Draxw3a-.js";/* empty css            */import"./index-YK6wEiK_.js";import"./index-hklGxL04.js";import"./Combination-BW2rxmPS.js";import"./index-BKpSwivT.js";import"./index-COsoz50Y.js";import"./index-kDSHONJO.js";import"./chevron-down-CVelUqFq.js";import"./createLucideIcon-CXndT-TN.js";import"./check-D-d_y1YX.js";import"./file-text-3EQardMW.js";import"./calendar-BrzHxjoH.js";import"./users-DSj1NEwx.js";import"./map-pin-duO8z-oX.js";import"./message-square-DVWP-Fcb.js";import"./log-out-C6Gxvim2.js";function at(r){const e=ne.c(59),{discounts:l,filters:i}=r,[c,ee]=ce.useState(i?.search||"");let C;e[0]!==i||e[1]!==c?(C=a=>{a.preventDefault(),w.get("/admin/discounts",{...i,search:c},{preserveState:!0})},e[0]=i,e[1]=c,e[2]=C):C=e[2];const R=C;let _;e[3]!==i?(_=(a,s)=>{const G={...i,[a]:s};s||delete G[a],w.get("/admin/discounts",G,{preserveState:!0})},e[3]=i,e[4]=_):_=e[4];const o=_,te=_e,se=Ce,le=we;let D;e[5]===Symbol.for("react.memo_cache_sentinel")?(D={percentage:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",fixed:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},e[5]=D):D=e[5];const ae=D;let k;e[6]===Symbol.for("react.memo_cache_sentinel")?(k={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",inactive:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",expired:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},e[6]=k):k=e[6];const re=k,ie=Se;let A;e[7]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(oe,{title:"Discounts - Admin"}),e[7]=A):A=e[7];let T;e[8]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Discount Codes"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage discount codes and promotions"})]}),e[8]=T):T=e[8];let E;e[9]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[T,t.jsx(Z,{href:"/admin/discounts/create",children:t.jsxs(S,{children:[t.jsx(fe,{className:"mr-2 h-4 w-4"}),"Add Discount"]})})]}),e[9]=E):E=e[9];let $;e[10]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(ue,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[10]=$):$=e[10];let I;e[11]===Symbol.for("react.memo_cache_sentinel")?(I=a=>ee(a.target.value),e[11]=I):I=e[11];let m;e[12]!==c?(m=t.jsxs("div",{className:"relative flex-1",children:[$,t.jsx(he,{placeholder:"Search discounts...",className:"pl-9",value:c,onChange:I})]}),e[12]=c,e[13]=m):m=e[13];let M;e[14]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(S,{type:"submit",children:"Search"}),e[14]=M):M=e[14];let d;e[15]!==R||e[16]!==m?(d=t.jsxs("form",{onSubmit:R,className:"flex flex-1 gap-2",children:[m,M]}),e[15]=R,e[16]=m,e[17]=d):d=e[17];const U=i?.type||"all";let x;e[18]!==o?(x=a=>o("type",a==="all"?null:a),e[18]=o,e[19]=x):x=e[19];let L;e[20]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(Q,{className:"w-36",children:t.jsx(W,{placeholder:"Type"})}),e[20]=L):L=e[20];let V;e[21]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsxs(X,{children:[t.jsx(n,{value:"all",children:"All Types"}),t.jsx(n,{value:"percentage",children:"Percentage"}),t.jsx(n,{value:"fixed",children:"Fixed Amount"})]}),e[21]=V):V=e[21];let h;e[22]!==U||e[23]!==x?(h=t.jsxs(Y,{value:U,onValueChange:x,children:[L,V]}),e[22]=U,e[23]=x,e[24]=h):h=e[24];const q=i?.status||"all";let p;e[25]!==o?(p=a=>o("status",a==="all"?null:a),e[25]=o,e[26]=p):p=e[26];let B;e[27]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(Q,{className:"w-36",children:t.jsx(W,{placeholder:"Status"})}),e[27]=B):B=e[27];let P;e[28]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsxs(X,{children:[t.jsx(n,{value:"all",children:"All Status"}),t.jsx(n,{value:"active",children:"Active"}),t.jsx(n,{value:"inactive",children:"Inactive"}),t.jsx(n,{value:"expired",children:"Expired"})]}),e[28]=P):P=e[28];let f;e[29]!==q||e[30]!==p?(f=t.jsxs(Y,{value:q,onValueChange:p,children:[B,P]}),e[29]=q,e[30]=p,e[31]=f):f=e[31];let u;e[32]!==h||e[33]!==f?(u=t.jsxs("div",{className:"flex gap-2",children:[h,f]}),e[32]=h,e[33]=f,e[34]=u):u=e[34];let j;e[35]!==d||e[36]!==u?(j=t.jsx(K,{className:"mb-6",children:t.jsx(O,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[d,u]})})}),e[35]=d,e[36]=u,e[37]=j):j=e[37];let z;e[38]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx("thead",{className:"border-b bg-muted",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Code"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Description"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Type"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Value"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Usage"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Valid Until"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e[38]=z):z=e[38];let g;if(e[39]!==l.data){let a;e[41]===Symbol.for("react.memo_cache_sentinel")?(a=s=>t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("code",{className:"rounded bg-muted px-2 py-1 text-sm font-mono",children:s.code}),t.jsx(S,{variant:"ghost",size:"icon",onClick:()=>le(s.code),children:t.jsx(je,{className:"h-4 w-4"})})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx("p",{className:"text-sm text-muted-foreground max-w-xs truncate",children:s.description||"-"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(J,{className:ae[s.type]||"",children:s.type})}),t.jsx("td",{className:"px-4 py-3 font-medium",children:s.type==="percentage"?`${s.value}%`:`R ${s.value.toLocaleString()}`}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[s.used_count," /"," ",s.max_uses===null?"âˆž":s.max_uses]}),s.max_uses&&t.jsxs("p",{className:"text-muted-foreground",children:[Math.round(s.used_count/s.max_uses*100),"% used"]})]})}),t.jsx("td",{className:"px-4 py-3",children:s.expires_at?ie(s.expires_at):"No expiry"}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(J,{className:re[s.status]||"",children:s.status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs(me,{children:[t.jsx(de,{asChild:!0,children:t.jsx(S,{variant:"ghost",size:"icon",children:t.jsx(ge,{className:"h-4 w-4"})})}),t.jsxs(xe,{align:"end",children:[t.jsx(H,{asChild:!0,children:t.jsxs(Z,{href:`/admin/discounts/${s.id}`,children:[t.jsx(ye,{className:"mr-2 h-4 w-4"}),"View Details"]})}),t.jsx(H,{asChild:!0,children:t.jsxs(Z,{href:`/admin/discounts/${s.id}/edit`,children:[t.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Edit"]})}),t.jsx(H,{onClick:()=>te(s),children:s.is_active?"Deactivate":"Activate"}),t.jsxs(H,{className:"text-red-600",onClick:()=>se(s),children:[t.jsx(be,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id),e[41]=a):a=e[41],g=l.data.map(a),e[39]=l.data,e[40]=g}else g=e[40];let y;e[42]!==l.data.length?(y=l.data.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:8,className:"px-4 py-12 text-center text-muted-foreground",children:"No discount codes found"})}),e[42]=l.data.length,e[43]=y):y=e[43];let N;e[44]!==g||e[45]!==y?(N=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[z,t.jsxs("tbody",{className:"divide-y divide-border",children:[g,y]})]})}),e[44]=g,e[45]=y,e[46]=N):N=e[46];let b;e[47]!==l.from||e[48]!==l.last_page||e[49]!==l.links||e[50]!==l.to||e[51]!==l.total?(b=l.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between border-t border-border px-4 py-3",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",l.from," to ",l.to," of ",l.total," discounts"]}),t.jsx("div",{className:"flex gap-2",children:l.links.map(ve)})]}),e[47]=l.from,e[48]=l.last_page,e[49]=l.links,e[50]=l.to,e[51]=l.total,e[52]=b):b=e[52];let v;e[53]!==N||e[54]!==b?(v=t.jsx(K,{children:t.jsxs(O,{className:"p-0",children:[N,b]})}),e[53]=N,e[54]=b,e[55]=v):v=e[55];let F;return e[56]!==j||e[57]!==v?(F=t.jsxs(pe,{children:[A,E,j,v]}),e[56]=j,e[57]=v,e[58]=F):F=e[58],F}function ve(r,e){return t.jsx(S,{variant:r.active?"default":"outline",size:"sm",disabled:!r.url,onClick:()=>r.url&&w.get(r.url),dangerouslySetInnerHTML:{__html:r.label}},e)}function Se(r){return new Date(r).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}function we(r){navigator.clipboard.writeText(r)}function Ce(r){confirm(`Are you sure you want to delete "${r.code}"?`)&&w.delete(`/admin/discounts/${r.id}`)}function _e(r){w.post(`/admin/discounts/${r.id}/toggle-status`)}export{at as default};
