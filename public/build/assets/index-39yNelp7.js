import{c as te,r as se,j as t,a as q,H as le,L as O}from"./app-C1SY9MDb.js";import{B as ae}from"./badge-DZzXRnRE.js";import{B as V}from"./button-Cay5-c5j.js";import{C as Q,a as W}from"./card-CR1uK1J-.js";import{D as re,a as ie,b as ne,c as X}from"./dropdown-menu-pbi0L3hx.js";import{I as J}from"./input-JYc9kwZj.js";import{S as oe,a as me,b as ce,c as Z,d as de}from"./select-CAhNXgoC.js";import{A as xe}from"./admin-layout-DjgJLR45.js";import{D as he}from"./download-fT70O6zv.js";import{S as fe}from"./search-DE-sQS7q.js";import{M as Y}from"./mail-DAsOWumf.js";import{E as pe}from"./ellipsis-DrGQukjC.js";import{U as ue}from"./user-Co9pn7WA.js";/* empty css            */import"./index-YK6wEiK_.js";import"./index-hklGxL04.js";import"./Combination-BW2rxmPS.js";import"./index-BKpSwivT.js";import"./index-COsoz50Y.js";import"./index-kDSHONJO.js";import"./chevron-down-CVelUqFq.js";import"./createLucideIcon-CXndT-TN.js";import"./check-D-d_y1YX.js";import"./file-text-3EQardMW.js";import"./calendar-BrzHxjoH.js";import"./users-DSj1NEwx.js";import"./map-pin-duO8z-oX.js";import"./message-square-DVWP-Fcb.js";import"./log-out-C6Gxvim2.js";function Ke(s){const e=te.c(67),{customers:l,filters:r}=s,[n,ee]=se.useState(r.search||"");let w;e[0]!==r||e[1]!==n?(w=a=>{a.preventDefault(),q.get("/admin/customers",{...r,search:n},{preserveState:!0})},e[0]=r,e[1]=n,e[2]=w):w=e[2];const $=w;let C;e[3]!==r?(C=(a,G)=>{const K={...r,[a]:G};G||delete K[a],q.get("/admin/customers",K,{preserveState:!0})},e[3]=r,e[4]=C):C=e[4];const i=C;let D;e[5]!==r?(D=()=>{const a=new URLSearchParams(r);window.location.href=`/admin/customers/export?${a.toString()}`},e[5]=r,e[6]=D):D=e[6];const F=D;let A;e[7]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx(le,{title:"Customers - Admin"}),e[7]=A):A=e[7];let E;e[8]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Customers"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage your customer accounts"})]}),e[8]=E):E=e[8];let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(he,{className:"mr-2 h-4 w-4"}),e[9]=M):M=e[9];let o;e[10]!==F?(o=t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[E,t.jsxs(V,{onClick:F,children:[M,"Export"]})]}),e[10]=F,e[11]=o):o=e[11];let L;e[12]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx(fe,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[12]=L):L=e[12];let k;e[13]===Symbol.for("react.memo_cache_sentinel")?(k=a=>ee(a.target.value),e[13]=k):k=e[13];let m;e[14]!==n?(m=t.jsxs("div",{className:"relative flex-1",children:[L,t.jsx(J,{placeholder:"Search customers...",className:"pl-9",value:n,onChange:k})]}),e[14]=n,e[15]=m):m=e[15];let B;e[16]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(V,{type:"submit",children:"Search"}),e[16]=B):B=e[16];let c;e[17]!==$||e[18]!==m?(c=t.jsxs("form",{onSubmit:$,className:"flex flex-1 gap-2",children:[m,B]}),e[17]=$,e[18]=m,e[19]=c):c=e[19];const H=r.role||"all";let d;e[20]!==i?(d=a=>i("role",a==="all"?null:a),e[20]=i,e[21]=d):d=e[21];let I;e[22]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsx(oe,{className:"w-36",children:t.jsx(me,{placeholder:"Role"})}),e[22]=I):I=e[22];let R;e[23]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsxs(ce,{children:[t.jsx(Z,{value:"all",children:"All Roles"}),t.jsx(Z,{value:"client",children:"Client"}),t.jsx(Z,{value:"admin",children:"Admin"})]}),e[23]=R):R=e[23];let x;e[24]!==H||e[25]!==d?(x=t.jsxs(de,{value:H,onValueChange:d,children:[I,R]}),e[24]=H,e[25]=d,e[26]=x):x=e[26];let h;e[27]!==c||e[28]!==x?(h=t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[c,x]}),e[27]=c,e[28]=x,e[29]=h):h=e[29];const z=r.date_from||"";let f;e[30]!==i?(f=a=>i("date_from",a.target.value),e[30]=i,e[31]=f):f=e[31];let p;e[32]!==z||e[33]!==f?(p=t.jsx(J,{type:"date",value:z,onChange:f,placeholder:"From date",className:"w-48"}),e[32]=z,e[33]=f,e[34]=p):p=e[34];const P=r.date_to||"";let u;e[35]!==i?(u=a=>i("date_to",a.target.value),e[35]=i,e[36]=u):u=e[36];let j;e[37]!==P||e[38]!==u?(j=t.jsx(J,{type:"date",value:P,onChange:u,placeholder:"To date",className:"w-48"}),e[37]=P,e[38]=u,e[39]=j):j=e[39];let g;e[40]!==p||e[41]!==j?(g=t.jsxs("div",{className:"mt-4 flex gap-2",children:[p,j]}),e[40]=p,e[41]=j,e[42]=g):g=e[42];let N;e[43]!==h||e[44]!==g?(N=t.jsx(Q,{className:"mb-6",children:t.jsxs(W,{className:"p-4",children:[h,g]})}),e[43]=h,e[44]=g,e[45]=N):N=e[45];let T;e[46]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx("thead",{className:"border-b bg-muted",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Customer"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Email"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Phone"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Bookings"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Total Spent"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Joined"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e[46]=T):T=e[46];let y;e[47]!==l.data?(y=l.data.map(ge),e[47]=l.data,e[48]=y):y=e[48];let b;e[49]!==l.data.length?(b=l.data.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-muted-foreground",children:"No customers found"})}),e[49]=l.data.length,e[50]=b):b=e[50];let _;e[51]!==y||e[52]!==b?(_=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[T,t.jsxs("tbody",{className:"divide-y divide-border",children:[y,b]})]})}),e[51]=y,e[52]=b,e[53]=_):_=e[53];let S;e[54]!==l.from||e[55]!==l.last_page||e[56]!==l.links||e[57]!==l.to||e[58]!==l.total?(S=l.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between border-t border-border px-4 py-3",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",l.from," to ",l.to," of ",l.total," customers"]}),t.jsx("div",{className:"flex gap-2",children:l.links.map(je)})]}),e[54]=l.from,e[55]=l.last_page,e[56]=l.links,e[57]=l.to,e[58]=l.total,e[59]=S):S=e[59];let v;e[60]!==_||e[61]!==S?(v=t.jsx(Q,{children:t.jsxs(W,{className:"p-0",children:[_,S]})}),e[60]=_,e[61]=S,e[62]=v):v=e[62];let U;return e[63]!==N||e[64]!==v||e[65]!==o?(U=t.jsxs(xe,{children:[A,o,N,v]}),e[63]=N,e[64]=v,e[65]=o,e[66]=U):U=e[66],U}function je(s,e){return t.jsx(V,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,onClick:()=>s.url&&q.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},e)}function ge(s){return t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/80 dark:bg-primary/60 text-sm font-bold text-primary-foreground",children:s.name?.charAt(0).toUpperCase()}),t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:s.name}),t.jsx(ae,{variant:s.role==="admin"?"default":"secondary",children:s.role})]})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Y,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{children:s.email})]})}),t.jsx("td",{className:"px-4 py-3",children:s.phone||"-"}),t.jsx("td",{className:"px-4 py-3",children:s.bookings_count||0}),t.jsxs("td",{className:"px-4 py-3 font-medium",children:["R ",s.total_spent?s.total_spent.toLocaleString():"0"]}),t.jsx("td",{className:"px-4 py-3",children:new Date(s.created_at).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs(re,{children:[t.jsx(ie,{asChild:!0,children:t.jsx(V,{variant:"ghost",size:"icon",children:t.jsx(pe,{className:"h-4 w-4"})})}),t.jsxs(ne,{align:"end",children:[t.jsx(X,{asChild:!0,children:t.jsxs(O,{href:`/admin/customers/${s.id}`,children:[t.jsx(ue,{className:"mr-2 h-4 w-4"}),"View Details"]})}),t.jsx(X,{asChild:!0,children:t.jsxs(O,{href:`/admin/customers/${s.id}/bookings`,children:[t.jsx(Y,{className:"mr-2 h-4 w-4"}),"View Bookings"]})})]})]})})]},s.id)}export{Ke as default};
