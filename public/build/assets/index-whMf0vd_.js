import{c as Y,r as J,a as O,j as t,H as F,L as H}from"./app-C1SY9MDb.js";import{B as I}from"./button-Cay5-c5j.js";import{b as K,c as Q,C as Z,a as G}from"./card-CR1uK1J-.js";import{S as V}from"./separator-CORR1ccg.js";import{S as W,P as M}from"./public-layout-D57EhYKk.js";import{M as X}from"./map-pin-duO8z-oX.js";import{C as ee}from"./clock-PRXvvc1d.js";import{C as te}from"./calendar-BrzHxjoH.js";import{T as se}from"./trash-2-Draxw3a-.js";/* empty css            */import"./index-DfOP-8f3.js";import"./dropdown-menu-pbi0L3hx.js";import"./index-YK6wEiK_.js";import"./index-hklGxL04.js";import"./Combination-BW2rxmPS.js";import"./index-BKpSwivT.js";import"./sheet-BO4QNby-.js";import"./x-D3TvH5Gs.js";import"./createLucideIcon-CXndT-TN.js";import"./user-Co9pn7WA.js";import"./phone-Cb2s3M8c.js";import"./mail-DAsOWumf.js";function le(r){const e=Y.c(58),{item:s,onRemove:R}=r;let k;e[0]!==s.participants?(k=s.participants.reduce(ae,0),e[0]=s.participants,e[1]=k):k=e[1];const b=k,$=s.tour?.featured_image?`/storage/${s.tour.featured_image}`:"/images/safari.jpg",z=s.tour?.title;let f;e[2]!==$||e[3]!==z?(f=t.jsx("div",{className:"aspect-video w-full overflow-hidden rounded-lg md:aspect-square md:w-32",children:t.jsx("img",{src:$,alt:z,className:"h-full w-full object-cover"})}),e[2]=$,e[3]=z,e[4]=f):f=e[4];const w=`/tours/${s.tour?.slug}`,g=s.tour?.title;let i;e[5]!==w||e[6]!==g?(i=t.jsx(H,{href:w,className:"text-lg font-semibold hover:text-primary",children:g}),e[5]=w,e[6]=g,e[7]=i):i=e[7];let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(X,{className:"h-4 w-4"}),e[8]=_):_=e[8];const y=s.tour?.location?.name;let c;e[9]!==y?(c=t.jsxs("span",{className:"flex items-center gap-1",children:[_,y]}),e[9]=y,e[10]=c):c=e[10];let N;e[11]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(ee,{className:"h-4 w-4"}),e[11]=N):N=e[11];const S=s.tour?.duration;let n;e[12]!==S?(n=t.jsxs("span",{className:"flex items-center gap-1",children:[N,S]}),e[12]=S,e[13]=n):n=e[13];let o;e[14]!==c||e[15]!==n?(o=t.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[c,n]}),e[14]=c,e[15]=n,e[16]=o):o=e[16];let x;e[17]!==o||e[18]!==i?(x=t.jsxs("div",{children:[i,o]}),e[17]=o,e[18]=i,e[19]=x):x=e[19];let v;e[20]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(te,{className:"h-4 w-4"}),e[20]=v):v=e[20];let m;e[21]!==s.tour_date?(m=new Date(s.tour_date).toLocaleDateString("en-ZA",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),e[21]=s.tour_date,e[22]=m):m=e[22];let d;e[23]!==m?(d=t.jsxs("span",{className:"flex items-center gap-1 rounded bg-gray-100 px-3 py-1 text-sm",children:[v,m]}),e[23]=m,e[24]=d):d=e[24];const C=b!==1?"s":"";let u;e[25]!==C||e[26]!==b?(u=t.jsxs("span",{className:"text-sm text-muted-foreground",children:[b," participant",C]}),e[25]=C,e[26]=b,e[27]=u):u=e[27];let l;e[28]!==d||e[29]!==u?(l=t.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[d,u]}),e[28]=d,e[29]=u,e[30]=l):l=e[30];let a;if(e[31]!==s.participants){let q;e[33]!==s.participants.length?(q=(A,D)=>t.jsxs("span",{children:[A.quantity,"x ",A.name," (R",A.price.toLocaleString(),")",D<s.participants.length-1?", ":""]},D),e[33]=s.participants.length,e[34]=q):q=e[34],a=s.participants.map(q),e[31]=s.participants,e[32]=a}else a=e[32];let p;e[35]!==a?(p=t.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:a}),e[35]=a,e[36]=p):p=e[36];let h;e[37]!==x||e[38]!==l||e[39]!==p?(h=t.jsxs("div",{className:"flex flex-1 flex-col justify-between",children:[x,l,p]}),e[37]=x,e[38]=l,e[39]=p,e[40]=h):h=e[40];let j;e[41]!==s.subtotal?(j=s.subtotal.toLocaleString(),e[41]=s.subtotal,e[42]=j):j=e[42];let L;e[43]!==j?(L=t.jsxs("p",{className:"text-xl font-bold",children:["R ",j]}),e[43]=j,e[44]=L):L=e[44];let E;e[45]!==s.id||e[46]!==R?(E=()=>R(s.id),e[45]=s.id,e[46]=R,e[47]=E):E=e[47];let B;e[48]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(se,{className:"mr-1 h-4 w-4"}),e[48]=B):B=e[48];let T;e[49]!==E?(T=t.jsxs(I,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-50 hover:text-red-700",onClick:E,children:[B,"Remove"]}),e[49]=E,e[50]=T):T=e[50];let P;e[51]!==L||e[52]!==T?(P=t.jsxs("div",{className:"flex flex-row items-center justify-between gap-4 md:flex-col md:items-end",children:[L,T]}),e[51]=L,e[52]=T,e[53]=P):P=e[53];let U;return e[54]!==h||e[55]!==P||e[56]!==f?(U=t.jsx(Z,{children:t.jsx(G,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[f,h,P]})})}),e[54]=h,e[55]=P,e[56]=f,e[57]=U):U=e[57],U}function ae(r,e){return r+e.quantity}function ze(r){const e=Y.c(35),{items:s,total:R}=r,[,k]=J.useState(!1);let b;e[0]===Symbol.for("react.memo_cache_sentinel")?(b=l=>{k(!0),O.delete(`/cart/${l}`,{onFinish:()=>k(!1),onSuccess:ne})},e[0]=b):b=e[0];const $=b,z=ie;if(s.length===0){let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(F,{title:"Cart - Ubuntu Sunshine Tours"}),e[1]=l):l=e[1];let a,p,h;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(W,{className:"mx-auto mb-4 h-16 w-16 text-muted-foreground"}),p=t.jsx("h1",{className:"mb-2 text-2xl font-bold",children:"Your cart is empty"}),h=t.jsx("p",{className:"mb-6 text-muted-foreground",children:"Browse our amazing tours and add some to your cart!"}),e[2]=a,e[3]=p,e[4]=h):(a=e[2],p=e[3],h=e[4]);let j;return e[5]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsxs(M,{children:[l,t.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[a,p,h,t.jsx(H,{href:"/tours",children:t.jsx(I,{size:"lg",children:"Browse Tours"})})]})]}),e[5]=j):j=e[5],j}let f;e[6]===Symbol.for("react.memo_cache_sentinel")?(f=t.jsx(F,{title:"Cart - Ubuntu Sunshine Tours"}),e[6]=f):f=e[6];let w;e[7]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Your Cart"}),t.jsx(I,{variant:"ghost",onClick:z,children:"Clear Cart"})]}),e[7]=w):w=e[7];let g;if(e[8]!==s){let l;e[10]===Symbol.for("react.memo_cache_sentinel")?(l=a=>t.jsx(le,{item:a,onRemove:$},a.id),e[10]=l):l=e[10],g=s.map(l),e[8]=s,e[9]=g}else g=e[9];let i;e[11]!==g?(i=t.jsx("div",{className:"space-y-4 lg:col-span-2",children:g}),e[11]=g,e[12]=i):i=e[12];let _;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(K,{children:t.jsx(Q,{children:"Order Summary"})}),e[13]=_):_=e[13];let y;e[14]!==s?(y=s.map(re),e[14]=s,e[15]=y):y=e[15];let c;e[16]!==y?(c=t.jsx("div",{className:"space-y-2",children:y}),e[16]=y,e[17]=c):c=e[17];let N;e[18]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(V,{}),e[18]=N):N=e[18];let S;e[19]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx("span",{children:"Total"}),e[19]=S):S=e[19];let n;e[20]!==R?(n=R.toLocaleString(),e[20]=R,e[21]=n):n=e[21];let o;e[22]!==n?(o=t.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[S,t.jsxs("span",{children:["R ",n]})]}),e[22]=n,e[23]=o):o=e[23];let x,v;e[24]===Symbol.for("react.memo_cache_sentinel")?(x=t.jsx(H,{href:"/checkout",className:"block",children:t.jsx(I,{className:"w-full",size:"lg",children:"Proceed to Checkout"})}),v=t.jsx("p",{className:"text-center text-sm text-muted-foreground",children:"Secure checkout powered by PayFast"}),e[24]=x,e[25]=v):(x=e[24],v=e[25]);let m;e[26]!==o||e[27]!==c?(m=t.jsx("div",{children:t.jsxs(Z,{className:"sticky top-24",children:[_,t.jsxs(G,{className:"space-y-4",children:[c,N,o,x,v]})]})}),e[26]=o,e[27]=c,e[28]=m):m=e[28];let d;e[29]!==m||e[30]!==i?(d=t.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[i,m]}),e[29]=m,e[30]=i,e[31]=d):d=e[31];let C;e[32]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("div",{className:"mt-8 text-center",children:t.jsx(H,{href:"/tours",className:"text-primary hover:underline",children:"‚Üê Continue browsing tours"})}),e[32]=C):C=e[32];let u;return e[33]!==d?(u=t.jsxs(M,{children:[f,t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[w,d,C]})]}),e[33]=d,e[34]=u):u=e[34],u}function re(r){return t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"line-clamp-1",children:r.tour?.title}),t.jsxs("span",{children:["R ",r.subtotal.toLocaleString()]})]},r.id)}function ie(){confirm("Are you sure you want to clear your cart?")&&O.delete("/cart",{onSuccess:ce})}function ce(){window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{count:0}}))}function ne(){fetch("/cart/count").then(de).then(me).catch(oe)}function oe(){}function me(r){window.dispatchEvent(new CustomEvent("cartUpdated",{detail:{count:r.count}}))}function de(r){return r.json()}export{ze as default};
