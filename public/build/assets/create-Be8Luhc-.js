import{c as me,r as se,j as t,a as de,H as he,L as le}from"./app-C1SY9MDb.js";import{B as ie}from"./button-Cay5-c5j.js";import{c as fe,b as ue,a as xe,C as pe}from"./card-CR1uK1J-.js";import{I as je}from"./input-JYc9kwZj.js";import{L as I}from"./label-CSsagSVn.js";import{T as ge}from"./textarea-BofFPz95.js";import{P as be}from"./public-layout-D57EhYKk.js";import{S as ve}from"./star-BEEtAroJ.js";import{A as ye}from"./arrow-left-Gf030EfU.js";import{U as Ne}from"./upload-Dk76Twak.js";/* empty css            */import"./index-DfOP-8f3.js";import"./dropdown-menu-pbi0L3hx.js";import"./index-YK6wEiK_.js";import"./index-hklGxL04.js";import"./Combination-BW2rxmPS.js";import"./index-BKpSwivT.js";import"./sheet-BO4QNby-.js";import"./x-D3TvH5Gs.js";import"./createLucideIcon-CXndT-TN.js";import"./user-Co9pn7WA.js";import"./phone-Cb2s3M8c.js";import"./mail-DAsOWumf.js";function Ke(Y){const e=me.c(73),{booking:s}=Y,[l,ae]=se.useState(0),[z,re]=se.useState(0);let C;e[0]===Symbol.for("react.memo_cache_sentinel")?(C=[],e[0]=C):C=e[0];const[i,oe]=se.useState(C);let L;e[1]!==s.id||e[2]!==i?(L=r=>{r.preventDefault();const o=new FormData(r.currentTarget);i.forEach((G,te)=>{o.append(`photos[${te}]`,G)}),de.post(`/my/bookings/${s.id}/review`,o,{onSuccess:Se,onError:_e})},e[1]=s.id,e[2]=i,e[3]=L):L=e[3];const J=L;let P;e[4]===Symbol.for("react.memo_cache_sentinel")?(P=r=>{const o=Array.from(r.target.files||[]);oe(G=>[...G,...o].slice(0,5))},e[4]=P):P=e[4];const ne=P;let $;e[5]===Symbol.for("react.memo_cache_sentinel")?($=r=>{oe(o=>o.filter((G,te)=>te!==r))},e[5]=$):$=e[5];const ce=$,K=`Review ${s.tour?.title} - Ubuntu Sunshine Tours`;let a;e[6]!==K?(a=t.jsx(he,{title:K}),e[6]=K,e[7]=a):a=e[7];let E;e[8]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx("div",{className:"mb-6",children:t.jsxs(le,{href:"/my/bookings",className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[t.jsx(ye,{className:"mr-2 h-4 w-4"}),"Back to My Bookings"]})}),e[8]=E):E=e[8];let T;e[9]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(fe,{children:"Review Your Experience"}),e[9]=T):T=e[9];const Q=s.tour?.title;let n;e[10]!==Q?(n=t.jsxs(ue,{children:[T,t.jsxs("p",{className:"text-muted-foreground",children:["Share your feedback about ",Q]})]}),e[10]=Q,e[11]=n):n=e[11];const V=s.tour?.featured_image?`/storage/${s.tour.featured_image}`:"/images/safari.jpg",W=s.tour?.title;let c;e[12]!==V||e[13]!==W?(c=t.jsx("div",{className:"aspect-video w-24 overflow-hidden rounded-lg",children:t.jsx("img",{src:V,alt:W,className:"h-full w-full object-cover"})}),e[12]=V,e[13]=W,e[14]=c):c=e[14];const X=s.tour?.title;let m;e[15]!==X?(m=t.jsx("h3",{className:"font-semibold",children:X}),e[15]=X,e[16]=m):m=e[16];let d;e[17]!==s.tour_date?(d=new Date(s.tour_date).toLocaleDateString(),e[17]=s.tour_date,e[18]=d):d=e[18];let h;e[19]!==d?(h=t.jsx("p",{className:"text-sm text-muted-foreground",children:d}),e[19]=d,e[20]=h):h=e[20];let f;e[21]!==s.booking_reference?(f=t.jsxs("p",{className:"text-sm font-medium",children:["Booking Reference: ",s.booking_reference]}),e[21]=s.booking_reference,e[22]=f):f=e[22];let u;e[23]!==m||e[24]!==h||e[25]!==f?(u=t.jsxs("div",{children:[m,h,f]}),e[23]=m,e[24]=h,e[25]=f,e[26]=u):u=e[26];let x;e[27]!==c||e[28]!==u?(x=t.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:t.jsxs("div",{className:"flex items-center gap-4",children:[c,u]})}),e[27]=c,e[28]=u,e[29]=x):x=e[29];let B;e[30]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(I,{className:"text-base font-medium",children:"Overall Rating *"}),e[30]=B):B=e[30];let D;e[31]===Symbol.for("react.memo_cache_sentinel")?(D=[1,2,3,4,5],e[31]=D):D=e[31];let p;e[32]!==z||e[33]!==l?(p=t.jsx("div",{className:"flex gap-1 mt-2",children:D.map(r=>t.jsx("button",{type:"button",className:"p-1",onMouseEnter:()=>re(r),onMouseLeave:()=>re(0),onClick:()=>ae(r),children:t.jsx(ve,{className:`h-8 w-8 ${r<=(z||l)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},r))}),e[32]=z,e[33]=l,e[34]=p):p=e[34];let j,g;e[35]!==l?(j=t.jsx("input",{type:"hidden",name:"rating",value:l,required:!0}),g=l===0&&t.jsx("p",{className:"text-sm text-red-500 mt-1",children:"Please select a rating"}),e[35]=l,e[36]=j,e[37]=g):(j=e[36],g=e[37]);let b;e[38]!==p||e[39]!==j||e[40]!==g?(b=t.jsxs("div",{children:[B,p,j,g]}),e[38]=p,e[39]=j,e[40]=g,e[41]=b):b=e[41];let F,M,U;e[42]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsxs("div",{children:[t.jsx(I,{htmlFor:"title",children:"Review Title"}),t.jsx(je,{id:"title",name:"title",type:"text",placeholder:"Summarize your experience",maxLength:255})]}),M=t.jsxs("div",{children:[t.jsx(I,{htmlFor:"comment",children:"Your Review *"}),t.jsx(ge,{id:"comment",name:"comment",rows:5,placeholder:"Tell us about your experience with this tour...",required:!0,minLength:10,maxLength:2e3}),t.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 10 characters, maximum 2000 characters"})]}),U=t.jsx(I,{htmlFor:"photos",children:"Photos (Optional)"}),e[42]=F,e[43]=M,e[44]=U):(F=e[42],M=e[43],U=e[44]);let H;e[45]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx(Ne,{className:"mx-auto h-12 w-12 text-gray-400"}),e[45]=H):H=e[45];let A;e[46]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4",children:t.jsxs("div",{className:"text-center",children:[H,t.jsxs("div",{className:"mt-2",children:[t.jsxs("label",{htmlFor:"photos",className:"cursor-pointer",children:[t.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Click to upload photos"}),t.jsx("input",{id:"photos",name:"photos",type:"file",className:"sr-only",multiple:!0,accept:"image/*",onChange:ne})]}),t.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"PNG, JPG up to 2MB each (max 5 photos)"})]})]})}),e[46]=A):A=e[46];let v;e[47]!==i?(v=i.length>0&&t.jsx("div",{className:"mt-4 grid grid-cols-3 gap-2",children:i.map((r,o)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:URL.createObjectURL(r),alt:`Preview ${o+1}`,className:"h-20 w-full object-cover rounded"}),t.jsx("button",{type:"button",onClick:()=>ce(o),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"Ã—"})]},o))}),e[47]=i,e[48]=v):v=e[48];let y;e[49]!==v?(y=t.jsxs("div",{children:[U,t.jsxs("div",{className:"mt-2",children:[A,v]})]}),e[49]=v,e[50]=y):y=e[50];const Z=l===0;let N;e[51]!==Z?(N=t.jsx(ie,{type:"submit",disabled:Z,children:"Submit Review"}),e[51]=Z,e[52]=N):N=e[52];const ee=`/my/bookings/${s.id}`;let O;e[53]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx(ie,{type:"button",variant:"outline",children:"Cancel"}),e[53]=O):O=e[53];let _;e[54]!==ee?(_=t.jsx(le,{href:ee,children:O}),e[54]=ee,e[55]=_):_=e[55];let S;e[56]!==N||e[57]!==_?(S=t.jsxs("div",{className:"flex gap-4",children:[N,_]}),e[56]=N,e[57]=_,e[58]=S):S=e[58];let w;e[59]!==J||e[60]!==b||e[61]!==y||e[62]!==S?(w=t.jsxs("form",{onSubmit:J,className:"space-y-6",children:[b,F,M,y,S]}),e[59]=J,e[60]=b,e[61]=y,e[62]=S,e[63]=w):w=e[63];let k;e[64]!==x||e[65]!==w?(k=t.jsxs(xe,{children:[x,w]}),e[64]=x,e[65]=w,e[66]=k):k=e[66];let R;e[67]!==n||e[68]!==k?(R=t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[E,t.jsx("div",{className:"max-w-2xl mx-auto",children:t.jsxs(pe,{children:[n,k]})})]}),e[67]=n,e[68]=k,e[69]=R):R=e[69];let q;return e[70]!==R||e[71]!==a?(q=t.jsxs(be,{children:[a,R]}),e[70]=R,e[71]=a,e[72]=q):q=e[72],q}function _e(Y){console.error("Review submission errors:",Y)}function Se(){}export{Ke as default};
