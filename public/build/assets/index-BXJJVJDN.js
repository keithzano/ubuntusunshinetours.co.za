import{c as le,r as ae,j as t,a as v,H as re,L as ne}from"./app-CCdLyeNd.js";import{B as ie}from"./badge-FP0Eo4Bb.js";import{B as P}from"./button-C3mWsqwf.js";import{C as J,a as K}from"./card-Cn4I26kp.js";import{D as ce,a as oe,b as me,c as w}from"./dropdown-menu-CWP62HWu.js";import{I as de}from"./input-Md0onarX.js";import{S as O,a as Q,b as U,c as n,d as W}from"./select-D9_zhw-l.js";import{A as xe}from"./admin-layout-moIvD3jO.js";import{S as he}from"./search-CThXLrVm.js";import{E as pe}from"./ellipsis-Br0Ytp9r.js";import{E as fe}from"./eye-qZDlQt3y.js";import{M as ue}from"./message-square-BdNL5HVB.js";import{T as q}from"./trash-2-CXnh2pRB.js";import{S as je}from"./star-Cj4fnUeE.js";/* empty css            */import"./index-BGQA3rTR.js";import"./index-CP66uTd0.js";import"./Combination-NQMwYvno.js";import"./index-C985WPGu.js";import"./index-BTLUeuTZ.js";import"./index-C3YVOeTh.js";import"./chevron-down-D63RCh7y.js";import"./createLucideIcon-DP6t-9k4.js";import"./check-BCfg21U8.js";import"./file-text-Cieu71p6.js";import"./calendar-CWr95TKm.js";import"./users-d3Oz5GKm.js";import"./map-pin-D_i16_U-.js";import"./log-out-BGL9Vbt0.js";function Xe(r){const e=le.c(57),{reviews:s,filters:i}=r,[c,X]=ae.useState(i?.search||"");let _;e[0]!==i||e[1]!==c?(_=a=>{a.preventDefault(),v.get("/admin/reviews",{...i,search:c},{preserveState:!0})},e[0]=i,e[1]=c,e[2]=_):_=e[2];const F=_;let C;e[3]!==i?(C=(a,l)=>{const G={...i,[a]:l};l||delete G[a],v.get("/admin/reviews",G,{preserveState:!0})},e[3]=i,e[4]=C):C=e[4];const o=C,Y=be,Z=Se,ee=ye,te=Ne;let k;e[5]===Symbol.for("react.memo_cache_sentinel")?(k={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"},e[5]=k):k=e[5];const se=k;let R;e[6]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(re,{title:"Reviews - Admin"}),e[6]=R):R=e[6];let A;e[7]===Symbol.for("react.memo_cache_sentinel")?(A=t.jsx("div",{className:"mb-6 flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Reviews"}),t.jsx("p",{className:"text-muted-foreground",children:"Manage customer reviews"})]})}),e[7]=A):A=e[7];let D;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(he,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e[8]=D):D=e[8];let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=a=>X(a.target.value),e[9]=M):M=e[9];let m;e[10]!==c?(m=t.jsxs("div",{className:"relative flex-1",children:[D,t.jsx(de,{placeholder:"Search reviews...",className:"pl-9",value:c,onChange:M})]}),e[10]=c,e[11]=m):m=e[11];let E;e[12]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(P,{type:"submit",children:"Search"}),e[12]=E):E=e[12];let d;e[13]!==F||e[14]!==m?(d=t.jsxs("form",{onSubmit:F,className:"flex flex-1 gap-2",children:[m,E]}),e[13]=F,e[14]=m,e[15]=d):d=e[15];const H=i?.rating||"all";let x;e[16]!==o?(x=a=>o("rating",a==="all"?null:a),e[16]=o,e[17]=x):x=e[17];let T;e[18]===Symbol.for("react.memo_cache_sentinel")?(T=t.jsx(O,{className:"w-36",children:t.jsx(Q,{placeholder:"Rating"})}),e[18]=T):T=e[18];let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I=t.jsxs(U,{children:[t.jsx(n,{value:"all",children:"All Ratings"}),t.jsx(n,{value:"5",children:"5 Stars"}),t.jsx(n,{value:"4",children:"4 Stars"}),t.jsx(n,{value:"3",children:"3 Stars"}),t.jsx(n,{value:"2",children:"2 Stars"}),t.jsx(n,{value:"1",children:"1 Star"})]}),e[19]=I):I=e[19];let h;e[20]!==H||e[21]!==x?(h=t.jsxs(W,{value:H,onValueChange:x,children:[T,I]}),e[20]=H,e[21]=x,e[22]=h):h=e[22];const z=i?.status||"all";let p;e[23]!==o?(p=a=>o("status",a==="all"?null:a),e[23]=o,e[24]=p):p=e[24];let $;e[25]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(O,{className:"w-36",children:t.jsx(Q,{placeholder:"Status"})}),e[25]=$):$=e[25];let L;e[26]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsxs(U,{children:[t.jsx(n,{value:"all",children:"All Status"}),t.jsx(n,{value:"pending",children:"Pending"}),t.jsx(n,{value:"approved",children:"Approved"}),t.jsx(n,{value:"rejected",children:"Rejected"})]}),e[26]=L):L=e[26];let f;e[27]!==z||e[28]!==p?(f=t.jsxs(W,{value:z,onValueChange:p,children:[$,L]}),e[27]=z,e[28]=p,e[29]=f):f=e[29];let u;e[30]!==h||e[31]!==f?(u=t.jsxs("div",{className:"flex gap-2",children:[h,f]}),e[30]=h,e[31]=f,e[32]=u):u=e[32];let j;e[33]!==d||e[34]!==u?(j=t.jsx(J,{className:"mb-6",children:t.jsx(K,{className:"p-4",children:t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[d,u]})})}),e[33]=d,e[34]=u,e[35]=j):j=e[35];let B;e[36]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx("thead",{className:"border-b bg-muted",children:t.jsxs("tr",{children:[t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Review"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Customer"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Tour"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Rating"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Date"}),t.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium",children:"Status"}),t.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium",children:"Actions"})]})}),e[36]=B):B=e[36];let g;if(e[37]!==s.data){let a;e[39]===Symbol.for("react.memo_cache_sentinel")?(a=l=>t.jsxs("tr",{className:"hover:bg-muted/50",children:[t.jsx("td",{className:"px-4 py-3",children:t.jsx("div",{className:"max-w-xs",children:t.jsx("p",{className:"line-clamp-2",children:l.comment})})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:l.customer_name}),t.jsx("p",{className:"text-sm text-muted-foreground",children:l.customer_email})]})}),t.jsx("td",{className:"px-4 py-3",children:t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:l.tour?.title}),t.jsx("p",{className:"text-sm text-muted-foreground",children:l.tour?.location?.name})]})}),t.jsx("td",{className:"px-4 py-3",children:te(l.rating)}),t.jsx("td",{className:"px-4 py-3",children:new Date(l.created_at).toLocaleDateString("en-ZA",{year:"numeric",month:"short",day:"numeric"})}),t.jsx("td",{className:"px-4 py-3",children:t.jsx(ie,{className:se[l.status]||"",children:l.status})}),t.jsx("td",{className:"px-4 py-3 text-right",children:t.jsxs(ce,{children:[t.jsx(oe,{asChild:!0,children:t.jsx(P,{variant:"ghost",size:"icon",children:t.jsx(pe,{className:"h-4 w-4"})})}),t.jsxs(me,{align:"end",children:[t.jsx(w,{asChild:!0,children:t.jsxs(ne,{href:`/tours/${l.tour?.slug}#reviews`,target:"_blank",children:[t.jsx(fe,{className:"mr-2 h-4 w-4"}),"View on Tour"]})}),l.status==="pending"&&t.jsxs(t.Fragment,{children:[t.jsxs(w,{onClick:()=>Y(l),className:"text-green-600",children:[t.jsx(ue,{className:"mr-2 h-4 w-4"}),"Approve"]}),t.jsxs(w,{onClick:()=>Z(l),className:"text-red-600",children:[t.jsx(q,{className:"mr-2 h-4 w-4"}),"Reject"]})]}),l.status==="approved"&&t.jsxs(w,{onClick:()=>Z(l),className:"text-red-600",children:[t.jsx(q,{className:"mr-2 h-4 w-4"}),"Reject"]}),t.jsxs(w,{className:"text-red-600",onClick:()=>ee(l),children:[t.jsx(q,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},l.id),e[39]=a):a=e[39],g=s.data.map(a),e[37]=s.data,e[38]=g}else g=e[38];let N;e[40]!==s.data.length?(N=s.data.length===0&&t.jsx("tr",{children:t.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-muted-foreground",children:"No reviews found"})}),e[40]=s.data.length,e[41]=N):N=e[41];let y;e[42]!==g||e[43]!==N?(y=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[B,t.jsxs("tbody",{className:"divide-y divide-border",children:[g,N]})]})}),e[42]=g,e[43]=N,e[44]=y):y=e[44];let S;e[45]!==s.from||e[46]!==s.last_page||e[47]!==s.links||e[48]!==s.to||e[49]!==s.total?(S=s.last_page>1&&t.jsxs("div",{className:"flex items-center justify-between border-t border-border px-4 py-3",children:[t.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",s.from," to ",s.to," of ",s.total," reviews"]}),t.jsx("div",{className:"flex gap-2",children:s.links.map(ge)})]}),e[45]=s.from,e[46]=s.last_page,e[47]=s.links,e[48]=s.to,e[49]=s.total,e[50]=S):S=e[50];let b;e[51]!==y||e[52]!==S?(b=t.jsx(J,{children:t.jsxs(K,{className:"p-0",children:[y,S]})}),e[51]=y,e[52]=S,e[53]=b):b=e[53];let V;return e[54]!==j||e[55]!==b?(V=t.jsxs(xe,{children:[R,A,j,b]}),e[54]=j,e[55]=b,e[56]=V):V=e[56],V}function ge(r,e){return t.jsx(P,{variant:r.active?"default":"outline",size:"sm",disabled:!r.url,onClick:()=>r.url&&v.get(r.url),dangerouslySetInnerHTML:{__html:r.label}},e)}function Ne(r){return t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>t.jsx(je,{className:`h-4 w-4 ${e<=r?"fill-yellow-400 text-yellow-400 dark:fill-yellow-500 dark:text-yellow-500":"text-gray-300 dark:text-gray-600"}`},e))})}function ye(r){confirm("Are you sure you want to delete this review?")&&v.delete(`/admin/reviews/${r.id}`)}function Se(r){v.post(`/admin/reviews/${r.id}/reject`)}function be(r){v.post(`/admin/reviews/${r.id}/approve`)}export{Xe as default};
